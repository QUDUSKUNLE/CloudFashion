// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGODB_URI")
}

type Address {
  StreetNo      Int
  StreetName    String
  City          String 
  State         String             
}

model Designers {
  DesignerID            String       @id @default(auto()) @map("_id") @db.ObjectId
  DesignerName          String       @unique
  DesignerPhoneNumbers  String[]     @default([])
  DesignerAddress       Address?
  CreatedAt             DateTime     @default(now())
  UpdatedAt             DateTime     @updatedAt

  User                  Users        @relation(fields: [UserID], references: [UserID])
  UserID                String       @unique @db.ObjectId

  Customers              Customers[]
}

model Customers {
  CustomerID              String        @id @default(auto()) @map("_id") @db.ObjectId
  CustomerEmail           String        @unique
  CustomerName            String?
  CustomerPhoneNumbers    String[]      @default([])
  CustomerAddress         Address?
  CreatedAt               DateTime      @default(now())
  UpdatedAt               DateTime      @updatedAt

  Designer                Designers     @relation(fields: [DesignerID], references: [DesignerID])
  DesignerID              String        @db.ObjectId

  Products                Products[]
}

model Users {
  UserID        String                @id @default(auto()) @map("_id") @db.ObjectId
  Email         String                @unique
  Password      String                @map("Password")
  PhoneNumbers  String[]              @default([])
  FirstName     String?               
  LastName      String?               
  Address       Address?
  Roles         String[]              @default(["USER"])
  CreatedAt     DateTime              @default(now())
  UpdatedAt     DateTime              @updatedAt

  Designer      Designers?
}


model Products {
  ProductID             String        @id @default(auto()) @map("_id") @db.ObjectId
  ProductName           String
  ProductQuantity       Int
  ProductVideo          String?       
  ProductPrice          Float
  ProductCosts          Float
  CreatedAt             DateTime      @default(now())
  UpdatedAt             DateTime      @updatedAt

  Customer              Customers     @relation(fields: [CustomerID], references: [CustomerID], onDelete: Cascade, onUpdate: Cascade)
  CustomerID            String        @db.ObjectId
}
